{"ast":null,"code":"import _regeneratorRuntime from\"/Users/noerios/Desktop/REACT BLOG/byenoe-blog/client/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/noerios/Desktop/REACT BLOG/byenoe-blog/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/noerios/Desktop/REACT BLOG/byenoe-blog/client/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useContext}from'react';import\"./write.css\";import axios from\"axios\";import{Context}from\"../../context/Context\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Write=function Write(){var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),title=_useState2[0],setTitle=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),desc=_useState4[0],setDesc=_useState4[1];var _useState5=useState(null),_useState6=_slicedToArray(_useState5,2),file=_useState6[0],setFile=_useState6[1];var _useContext=useContext(Context),user=_useContext.user;var handleSubmit=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(e){var newPost,data,filename,res;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:e.preventDefault();newPost={username:user.username,title:title,desc:desc};if(!file){_context.next=15;break;}data=new FormData();filename=Date.now()+file.name;data.append(\"name\",filename);data.append(\"file\",file);newPost.photo=filename;_context.prev=8;_context.next=11;return axios.post(\"/upload\",data);case 11:_context.next=15;break;case 13:_context.prev=13;_context.t0=_context[\"catch\"](8);case 15:_context.prev=15;_context.next=18;return axios.post(\"/posts\",newPost);case 18:res=_context.sent;window.location.replace(\"/post/\"+res.data._id);_context.next=24;break;case 22:_context.prev=22;_context.t1=_context[\"catch\"](15);case 24:case\"end\":return _context.stop();}}},_callee,null,[[8,13],[15,22]]);}));return function handleSubmit(_x){return _ref.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(\"div\",{className:\"write\",children:[file&&/*#__PURE__*/_jsx(\"img\",{src:URL.createObjectURL(file),alt:\"\",className:\"writeImg\"}),/*#__PURE__*/_jsxs(\"form\",{className:\"writeForm\",onSubmit:handleSubmit,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"writeFormGroup\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"fileInput\",children:/*#__PURE__*/_jsx(\"i\",{class:\"writeIcon fas fa-plus\"})}),/*#__PURE__*/_jsx(\"input\",{type:\"file\",id:\"fileInput\",style:{display:\"none\"},onChange:function onChange(e){return setFile(e.target.files[0]);}}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Title\",className:\"writeInput\",autoFocus:true,onChange:function onChange(e){return setTitle(e.target.value);}})]}),/*#__PURE__*/_jsx(\"div\",{className:\"writeFormGroup\",children:/*#__PURE__*/_jsx(\"textarea\",{placeholder:\"Write your post...\",type:\"text\",className:\"writeInput writeText\",onChange:function onChange(e){return setDesc(e.target.value);}})}),/*#__PURE__*/_jsx(\"button\",{className:\"writeSubmit\",type:\"submit\",children:\"Publish\"})]})]});};export default Write;","map":{"version":3,"sources":["/Users/noerios/Desktop/REACT BLOG/byenoe-blog/client/src/pages/write/Write.jsx"],"names":["React","useState","useContext","axios","Context","Write","title","setTitle","desc","setDesc","file","setFile","user","handleSubmit","e","preventDefault","newPost","username","data","FormData","filename","Date","now","name","append","photo","post","res","window","location","replace","_id","URL","createObjectURL","display","target","files","value"],"mappings":"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","sourcesContent":["import React, { useState, useContext } from 'react';\nimport \"./write.css\"\nimport axios from \"axios\";\nimport {Context} from \"../../context/Context\"\n\nconst Write = () => {\n    const [title, setTitle] = useState(\"\");\n    const [desc, setDesc] = useState(\"\");\n    const [file, setFile] = useState(null);\n    const {user} = useContext(Context);\n\n    const handleSubmit = async (e) =>{\n        e.preventDefault();\n        const newPost = {\n            username: user.username,\n            title,\n            desc,\n        };\n        if (file) {\n            const data = new FormData();\n            const filename= Date.now() + file.name;\n            data.append(\"name\", filename);\n            data.append(\"file\", file);\n            newPost.photo = filename;\n            try{\n                await axios.post(\"/upload\", data);\n            }catch(err){}\n        }\n        try{\n            const res = await axios.post(\"/posts\", newPost);\n            window.location.replace(\"/post/\"+res.data._id);\n        }catch(err){}      \n    };\n\n    return (\n        <div className=\"write\">\n            {file &&\n                <img src={URL.createObjectURL(file)} alt=\"\" className=\"writeImg\" />\n            }\n            \n            <form className=\"writeForm\" onSubmit={handleSubmit}>\n                <div className=\"writeFormGroup\">\n                    <label htmlFor=\"fileInput\">\n                        <i class=\"writeIcon fas fa-plus\"></i>\n                    </label>\n                    <input \n                        type=\"file\" \n                        id=\"fileInput\" \n                        style={{display: \"none\"}} \n                        onChange={(e) => setFile(e.target.files[0])}\n                    />\n                    <input \n                        type=\"text\" \n                        placeholder=\"Title\" \n                        className=\"writeInput\" \n                        autoFocus={true} \n                        onChange={e=>setTitle(e.target.value)}\n                        />\n                </div>\n                <div className=\"writeFormGroup\">\n                    <textarea \n                        placeholder=\"Write your post...\" \n                        type=\"text\" \n                        className=\"writeInput writeText\"\n                        onChange={e=>setDesc(e.target.value)}\n                    ></textarea>\n                </div>\n                <button className=\"writeSubmit\" type=\"submit\">Publish</button>\n            </form>\n        </div>\n    );\n}\n\nexport default Write;\n"]},"metadata":{},"sourceType":"module"}